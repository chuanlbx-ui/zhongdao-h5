# 前端端口固定解决方案

## 🎯 问题描述

之前前端开发服务器启动时端口会随机变化（5173 → 5174 → 5175 → 5176），严重影响开发和测试的稳定性。

## ✅ 解决方案

### 1. Vite配置优化
- 在 `vite.config.ts` 中添加了 `strictPort: true` 强制使用固定端口
- 添加了 `host: true` 允许外部访问
- 修复了代理配置，从 `/api` 改为 `/api/v1` 避免路由冲突

### 2. Playwright配置同步
- `playwright.config.ts` 已配置为使用 `http://localhost:5173` 作为baseURL

### 3. 启动脚本

#### Windows用户
```bash
# 双击运行或在命令行执行
D:\wwwroot\zhongdao-h5\start-dev-fixed.bat
```

#### Linux/WSL/Git Bash用户
```bash
# 在项目目录执行
./start-dev-fixed.sh
```

## 🚀 使用方法

### 方法一：使用启动脚本（推荐）
```bash
# Windows
start-dev-fixed.bat

# Linux/WSL
./start-dev-fixed.sh
```

### 方法二：手动启动
```bash
cd D:\wwwroot\zhongdao-h5
npm run dev
```

## ✅ 验证结果

- ✅ 前端固定运行在 `http://localhost:5173`
- ✅ API测试页面可访问：`http://localhost:5173/api-test`
- ✅ Playwright测试可以正确找到页面元素
- ✅ 端口不再随机变化

## 📝 注意事项

1. **如果端口被占用**：启动脚本会自动清理占用5173端口的进程
2. **TailwindCSS警告**：不影响功能，可以暂时忽略
3. **后端API**：需要确保运行在 `http://localhost:3000`

## 🔧 故障排除

如果遇到端口占用问题：
1. 关闭所有终端窗口
2. 运行启动脚本，它会自动清理端口
3. 或者手动重启电脑

现在开发环境将保持稳定，前端始终运行在5173端口！